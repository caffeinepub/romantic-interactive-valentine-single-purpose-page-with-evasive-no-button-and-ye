{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Swap celebration photo assets and harden inline photo loading",
  "requirements": [
    {
      "id": "REQ-36",
      "summary": "Overwrite the two existing generated celebration photo files with the newly uploaded images while keeping stable filenames.",
      "acceptanceCriteria": [
        "`frontend/public/assets/generated/valentine-photo-1.jpg` is replaced with the uploaded image `IMG_20251223_183308_541-1.jpg` content (filename remains `valentine-photo-1.jpg`).",
        "`frontend/public/assets/generated/valentine-photo-2.jpg` is replaced with the uploaded image `IMG_20260125_131055_525-1.jpg` content (filename remains `valentine-photo-2.jpg`).",
        "After clicking YES, both images render inline above the celebration text without showing the fallback text \"Photo could not be loaded\" on mobile/iPad Safari and Chrome."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/valentine-photo-1.jpg",
          "operation": "modify",
          "description": "Replace the binary content of this static asset with the uploaded image `IMG_20251223_183308_541-1.jpg`, preserving the exact target filename and path so existing UI references remain stable."
        },
        {
          "path": "frontend/public/assets/generated/valentine-photo-2.jpg",
          "operation": "modify",
          "description": "Replace the binary content of this static asset with the uploaded image `IMG_20260125_131055_525-1.jpg`, preserving the exact target filename and path so existing UI references remain stable."
        }
      ]
    },
    {
      "id": "REQ-37",
      "summary": "Keep inline celebration photos base-path-safe via getAssetUrl and ensure they remain inline (no fullscreen/lightbox behavior).",
      "acceptanceCriteria": [
        "In the post-YES inline celebration state, both photos render stacked vertically at the top and the celebration text remains directly beneath them in the normal page layout.",
        "Image `src` values are constructed with `getAssetUrl('assets/generated/valentine-photo-1.jpg')` and `getAssetUrl('assets/generated/valentine-photo-2.jpg')` (or an equivalent base-path-safe mechanism).",
        "No fullscreen overlay, modal, or scroll-locking behavior is triggered on YES."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/InlineCelebration.tsx",
          "operation": "modify",
          "description": "Confirm both image `src` values are constructed via `getAssetUrl(...)` and keep the layout as a simple inline vertical stack above the text, with no click handlers or viewer wiring that could introduce fullscreen/lightbox behavior."
        },
        {
          "path": "frontend/src/components/FullscreenCelebrationViewer.tsx",
          "operation": "delete",
          "description": "Remove the unused fullscreen viewer placeholder to reduce risk of accidental wiring; inline celebration must remain the only post-YES viewing experience."
        }
      ]
    },
    {
      "id": "REQ-38",
      "summary": "Add automatic retry logic to CelebrationPhoto so transient load/decode issues do not permanently show the error fallback.",
      "acceptanceCriteria": [
        "If an image fails to load due to a transient issue, the component automatically retries loading (e.g., by re-mounting the `<img>` / changing its key) before entering the fallback state.",
        "The component does not remain stuck in the error state on subsequent successful loads for the same `src`.",
        "The only fallback text (if it must appear) remains exactly: \"Photo could not be loaded\" (no new user-facing copy is introduced)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/CelebrationPhoto.tsx",
          "operation": "modify",
          "description": "Implement an automatic retry path (e.g., limited retry count with a short delay that bumps the `<img>` key to force re-mount) before setting the permanent error fallback, while preserving the exact fallback text \"Photo could not be loaded\" and ensuring state resets correctly on `src` changes and subsequent successful loads."
        }
      ]
    }
  ]
}